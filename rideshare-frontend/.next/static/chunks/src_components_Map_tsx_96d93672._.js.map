{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/Desktop/sty/diplom3/rideshare-frontend/src/components/Map.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Add type declaration for ymaps global\ndeclare global {\n  interface Window {\n    ymaps: any;\n  }\n}\n\ninterface MapProps {\n  onMapClick: (coords: [number, number]) => void;\n  onMarkerDrag: (type: 'departure' | 'destination', coords: [number, number]) => void;\n  departureCoords?: [number, number];\n  destinationCoords?: [number, number];\n}\n\nexport default function Map({ onMapClick, onMarkerDrag, departureCoords, destinationCoords }: MapProps) {\n  const mapRef = useRef<L.Map | null>(null);\n  const departureMarkerRef = useRef<L.Marker | null>(null);\n  const destinationMarkerRef = useRef<L.Marker | null>(null);\n  const routeRef = useRef<L.Polyline | null>(null);\n\n  useEffect(() => {\n    // Initialize map\n    if (!mapRef.current) {\n      mapRef.current = L.map('map').setView([55.76, 37.64], 10);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: 'Â© OpenStreetMap contributors'\n      }).addTo(mapRef.current);\n\n      // Add click handler\n      mapRef.current.on('click', (e: L.LeafletMouseEvent) => {\n        const { lat, lng } = e.latlng;\n        onMapClick([lat, lng]);\n      });\n    }\n\n    // Cleanup on unmount\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.remove();\n        mapRef.current = null;\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Update departure marker\n    if (departureCoords) {\n      if (departureMarkerRef.current) {\n        departureMarkerRef.current.setLatLng(departureCoords);\n      } else {\n        departureMarkerRef.current = L.marker(departureCoords, {\n          draggable: true,\n          icon: L.divIcon({\n            className: 'bg-blue-500 w-6 h-6 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white font-bold',\n            html: 'A'\n          })\n        }).addTo(mapRef.current);\n\n        departureMarkerRef.current.on('dragend', (e) => {\n          const marker = e.target;\n          const position = marker.getLatLng();\n          onMarkerDrag('departure', [position.lat, position.lng]);\n        });\n      }\n    } else if (departureMarkerRef.current) {\n      departureMarkerRef.current.remove();\n      departureMarkerRef.current = null;\n    }\n\n    // Update destination marker\n    if (destinationCoords) {\n      if (destinationMarkerRef.current) {\n        destinationMarkerRef.current.setLatLng(destinationCoords);\n      } else {\n        destinationMarkerRef.current = L.marker(destinationCoords, {\n          draggable: true,\n          icon: L.divIcon({\n            className: 'bg-red-500 w-6 h-6 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white font-bold',\n            html: 'B'\n          })\n        }).addTo(mapRef.current);\n\n        destinationMarkerRef.current.on('dragend', (e) => {\n          const marker = e.target;\n          const position = marker.getLatLng();\n          onMarkerDrag('destination', [position.lat, position.lng]);\n        });\n      }\n    } else if (destinationMarkerRef.current) {\n      destinationMarkerRef.current.remove();\n      destinationMarkerRef.current = null;\n    }\n\n    // Update route\n    if (departureCoords && destinationCoords) {\n      if (routeRef.current) {\n        routeRef.current.setLatLngs([departureCoords, destinationCoords]);\n      } else {\n        routeRef.current = L.polyline([departureCoords, destinationCoords], {\n          color: '#3B82F6',\n          weight: 3,\n          opacity: 0.8\n        }).addTo(mapRef.current);\n      }\n\n      // Fit bounds to show both markers\n      const bounds = L.latLngBounds([departureCoords, destinationCoords]);\n      mapRef.current.fitBounds(bounds, { padding: [50, 50] });\n    } else if (routeRef.current) {\n      routeRef.current.remove();\n      routeRef.current = null;\n    }\n  }, [departureCoords, destinationCoords]);\n\n  return <div id=\"map\" className=\"w-full h-full rounded-lg\" />;\n} "],"names":[],"mappings":";;;;AAEA;AAEA;;;AAJA;;;;AAoBe,SAAS,IAAI,EAAE,UAAU,EAAE,YAAY,EAAE,eAAe,EAAE,iBAAiB,EAAY;;IACpG,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAgB;IACpC,MAAM,qBAAqB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAmB;IACnD,MAAM,uBAAuB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAmB;IACrD,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAqB;IAE3C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yBAAE;YACR,iBAAiB;YACjB,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,OAAO,OAAO,GAAG,oJAAA,CAAA,UAAC,CAAC,GAAG,CAAC,OAAO,OAAO,CAAC;oBAAC;oBAAO;iBAAM,EAAE;gBACtD,oJAAA,CAAA,UAAC,CAAC,SAAS,CAAC,sDAAsD;oBAChE,aAAa;gBACf,GAAG,KAAK,CAAC,OAAO,OAAO;gBAEvB,oBAAoB;gBACpB,OAAO,OAAO,CAAC,EAAE,CAAC;qCAAS,CAAC;wBAC1B,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,MAAM;wBAC7B,WAAW;4BAAC;4BAAK;yBAAI;oBACvB;;YACF;YAEA,qBAAqB;YACrB;iCAAO;oBACL,IAAI,OAAO,OAAO,EAAE;wBAClB,OAAO,OAAO,CAAC,MAAM;wBACrB,OAAO,OAAO,GAAG;oBACnB;gBACF;;QACF;wBAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yBAAE;YACR,IAAI,CAAC,OAAO,OAAO,EAAE;YAErB,0BAA0B;YAC1B,IAAI,iBAAiB;gBACnB,IAAI,mBAAmB,OAAO,EAAE;oBAC9B,mBAAmB,OAAO,CAAC,SAAS,CAAC;gBACvC,OAAO;oBACL,mBAAmB,OAAO,GAAG,oJAAA,CAAA,UAAC,CAAC,MAAM,CAAC,iBAAiB;wBACrD,WAAW;wBACX,MAAM,oJAAA,CAAA,UAAC,CAAC,OAAO,CAAC;4BACd,WAAW;4BACX,MAAM;wBACR;oBACF,GAAG,KAAK,CAAC,OAAO,OAAO;oBAEvB,mBAAmB,OAAO,CAAC,EAAE,CAAC;yCAAW,CAAC;4BACxC,MAAM,SAAS,EAAE,MAAM;4BACvB,MAAM,WAAW,OAAO,SAAS;4BACjC,aAAa,aAAa;gCAAC,SAAS,GAAG;gCAAE,SAAS,GAAG;6BAAC;wBACxD;;gBACF;YACF,OAAO,IAAI,mBAAmB,OAAO,EAAE;gBACrC,mBAAmB,OAAO,CAAC,MAAM;gBACjC,mBAAmB,OAAO,GAAG;YAC/B;YAEA,4BAA4B;YAC5B,IAAI,mBAAmB;gBACrB,IAAI,qBAAqB,OAAO,EAAE;oBAChC,qBAAqB,OAAO,CAAC,SAAS,CAAC;gBACzC,OAAO;oBACL,qBAAqB,OAAO,GAAG,oJAAA,CAAA,UAAC,CAAC,MAAM,CAAC,mBAAmB;wBACzD,WAAW;wBACX,MAAM,oJAAA,CAAA,UAAC,CAAC,OAAO,CAAC;4BACd,WAAW;4BACX,MAAM;wBACR;oBACF,GAAG,KAAK,CAAC,OAAO,OAAO;oBAEvB,qBAAqB,OAAO,CAAC,EAAE,CAAC;yCAAW,CAAC;4BAC1C,MAAM,SAAS,EAAE,MAAM;4BACvB,MAAM,WAAW,OAAO,SAAS;4BACjC,aAAa,eAAe;gCAAC,SAAS,GAAG;gCAAE,SAAS,GAAG;6BAAC;wBAC1D;;gBACF;YACF,OAAO,IAAI,qBAAqB,OAAO,EAAE;gBACvC,qBAAqB,OAAO,CAAC,MAAM;gBACnC,qBAAqB,OAAO,GAAG;YACjC;YAEA,eAAe;YACf,IAAI,mBAAmB,mBAAmB;gBACxC,IAAI,SAAS,OAAO,EAAE;oBACpB,SAAS,OAAO,CAAC,UAAU,CAAC;wBAAC;wBAAiB;qBAAkB;gBAClE,OAAO;oBACL,SAAS,OAAO,GAAG,oJAAA,CAAA,UAAC,CAAC,QAAQ,CAAC;wBAAC;wBAAiB;qBAAkB,EAAE;wBAClE,OAAO;wBACP,QAAQ;wBACR,SAAS;oBACX,GAAG,KAAK,CAAC,OAAO,OAAO;gBACzB;gBAEA,kCAAkC;gBAClC,MAAM,SAAS,oJAAA,CAAA,UAAC,CAAC,YAAY,CAAC;oBAAC;oBAAiB;iBAAkB;gBAClE,OAAO,OAAO,CAAC,SAAS,CAAC,QAAQ;oBAAE,SAAS;wBAAC;wBAAI;qBAAG;gBAAC;YACvD,OAAO,IAAI,SAAS,OAAO,EAAE;gBAC3B,SAAS,OAAO,CAAC,MAAM;gBACvB,SAAS,OAAO,GAAG;YACrB;QACF;wBAAG;QAAC;QAAiB;KAAkB;IAEvC,qBAAO,6LAAC;QAAI,IAAG;QAAM,WAAU;;;;;;AACjC;GAvGwB;KAAA","debugId":null}}]
}