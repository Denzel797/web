{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Apollo/Desktop/Ride-web/rideshare-frontend/src/components/Navbar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  is_verified: boolean;\n  phone_number: string;\n}\n\nexport default function Navbar() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const router = useRouter();\n\n  useEffect(() => {\n    // Проверяем наличие пользователя при загрузке компонента\n    const checkUser = () => {\n      const userStr = localStorage.getItem('user');\n      const token = localStorage.getItem('access_token');\n      \n      if (userStr && token) {\n        try {\n          const userData = JSON.parse(userStr);\n          setUser(userData);\n        } catch (e) {\n          console.error('Error parsing user data:', e);\n          handleLogout();\n        }\n      } else {\n        setUser(null);\n      }\n    };\n\n    checkUser();\n    // Добавляем слушатель для storage events\n    window.addEventListener('storage', checkUser);\n    \n    return () => {\n      window.removeEventListener('storage', checkUser);\n    };\n  }, []);\n\n  const handleLogout = () => {\n    // Удаляем данные пользователя и токены\n    localStorage.removeItem('user');\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('refresh_token');\n    setUser(null);\n    router.push('/');\n  };\n\n  return (\n    <nav className=\"bg-white shadow\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between h-16\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0 flex items-center\">\n              <Link href=\"/\" className=\"text-xl font-bold text-indigo-600\">\n                RideShare\n              </Link>\n            </div>\n            {user && (\n              <div className=\"hidden sm:ml-6 sm:flex sm:space-x-8\">\n                <Link\n                  href=\"/trips/all\"\n                  className=\"text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium\"\n                >\n                  Все поездки\n                </Link>\n                <Link\n                  href=\"/trips\"\n                  className=\"text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium\"\n                >\n                  Мои поездки\n                </Link>\n                <Link\n                  href=\"/trips/create\"\n                  className=\"text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium\"\n                >\n                  Создать поездку\n                </Link>\n                <Link\n                  href=\"/bookings\"\n                  className=\"text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium\"\n                >\n                  Мои бронирования\n                </Link>\n                <Link\n                  href=\"/send-packages\"\n                  className=\"text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium\"\n                >\n                  Посылки\n                </Link>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center\">\n            {user ? (\n              <div className=\"ml-3 relative\">\n                <div>\n                  <button\n                    onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n                    className=\"flex items-center max-w-xs bg-white rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                  >\n                    <span className=\"sr-only\">Открыть меню пользователя</span>\n                    <div className=\"h-8 w-8 rounded-full bg-indigo-600 flex items-center justify-center\">\n                      <span className=\"text-sm font-medium text-white\">\n                        {user.username[0].toUpperCase()}\n                      </span>\n                    </div>\n                  </button>\n                </div>\n\n                {isDropdownOpen && (\n                  <div className=\"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 py-1 z-50\">\n                    <div className=\"px-4 py-2 text-sm text-gray-700 border-b\">\n                      {user.username}\n                    </div>\n                    <Link\n                      href=\"/profile\"\n                      className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                      onClick={() => setIsDropdownOpen(false)}\n                    >\n                      Личный кабинет\n                    </Link>\n                    <Link\n                      href=\"/trips/all\"\n                      className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                      onClick={() => setIsDropdownOpen(false)}\n                    >\n                      Все поездки\n                    </Link>\n                    <Link\n                      href=\"/trips\"\n                      className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                      onClick={() => setIsDropdownOpen(false)}\n                    >\n                      Мои поездки\n                    </Link>\n                    <Link\n                      href=\"/bookings\"\n                      className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                      onClick={() => setIsDropdownOpen(false)}\n                    >\n                      Мои бронирования\n                    </Link>\n                    <button\n                      onClick={handleLogout}\n                      className=\"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                    >\n                      Выйти\n                    </button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-4\">\n                <Link\n                  href=\"/auth/login\"\n                  className=\"text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium\"\n                >\n                  Войти\n                </Link>\n                <Link\n                  href=\"/auth/register\"\n                  className=\"bg-indigo-600 text-white hover:bg-indigo-700 px-4 py-2 rounded-md text-sm font-medium\"\n                >\n                  Регистрация\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}