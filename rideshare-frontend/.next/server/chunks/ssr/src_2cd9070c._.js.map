{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/Desktop/sty/diplom3/rideshare-frontend/src/constants.ts"],"sourcesContent":["export const API_BASE_URL = 'http://localhost:8000'; "],"names":[],"mappings":";;;AAAO,MAAM,eAAe","debugId":null}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/Desktop/sty/diplom3/rideshare-frontend/src/app/trips/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport dynamic from 'next/dynamic';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { format } from 'date-fns';\r\nimport { ru } from 'date-fns/locale';\r\nimport { Badge, Card, Avatar } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { API_BASE_URL } from '@/constants';\r\n\r\ninterface Trip {\r\n  id: string;\r\n  departure_location: string;\r\n  destination_location: string;\r\n  departure_coords: string;\r\n  destination_coords: string;\r\n  date: string;\r\n  time: string;\r\n  price: number;\r\n  available_seats: number;\r\n  status: 'draft' | 'active' | 'completed' | 'cancelled';\r\n  description?: string;\r\n  route_distance?: string;\r\n  route_duration?: string;\r\n  driver: {\r\n    username: string;\r\n    first_name?: string;\r\n    last_name?: string;\r\n    profile_picture?: string;\r\n    driver_rating: number;\r\n  };\r\n}\r\n\r\n// Dynamically import the Map component to avoid SSR issues\r\nconst MapComponent = dynamic(() => import('@/components/Map'), {\r\n  ssr: false,\r\n  loading: () => <div className=\"w-full h-[400px] bg-gray-100 rounded-lg animate-pulse\" />\r\n});\r\n\r\nexport default function TripDetailsPage({ params }: { params: Promise<{ id: string }> }) {\r\n  const router = useRouter();\r\n  const [trip, setTrip] = useState<Trip | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const resolvedParams = use(params);\r\n  const baseUrl = API_BASE_URL;\r\n\r\n  useEffect(() => {\r\n    const fetchTripDetails = async () => {\r\n      try {\r\n        const token = localStorage.getItem('access_token');\r\n        if (!token) {\r\n          router.push('/auth/login');\r\n          return;\r\n        }\r\n\r\n        const response = await fetch(`${baseUrl}/api/trips/${resolvedParams.id}/`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch trip details');\r\n        }\r\n\r\n        const data = await response.json();\r\n        setTrip(data);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'An error occurred');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTripDetails();\r\n  }, [resolvedParams.id, router, baseUrl]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <div className=\"text-red-500\">{error}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!trip) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <div className=\"text-gray-500\">Trip not found</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formattedDate = format(new Date(trip.date), 'd MMMM yyyy', { locale: ru });\r\n  const statusColor = {\r\n    draft: 'default',\r\n    active: 'processing',\r\n    completed: 'success',\r\n    cancelled: 'error'\r\n  }[trip.status];\r\n\r\n  const statusLabel = {\r\n    draft: 'Черновик',\r\n    active: 'Активная',\r\n    completed: 'Завершена',\r\n    cancelled: 'Отменена'\r\n  }[trip.status];\r\n\r\n  const departureCoords = trip.departure_coords?.split(',').map(Number) as [number, number];\r\n  const destinationCoords = trip.destination_coords?.split(',').map(Number) as [number, number];\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <div className=\"mb-6 flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Детали поездки</h1>\r\n        <Badge status={statusColor as any} text={statusLabel} />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        <div className=\"space-y-6\">\r\n          {/* Route Information */}\r\n          <Card title=\"Маршрут\" className=\"shadow-sm\">\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-2 h-2 rounded-full bg-green-500\" />\r\n                <span>{trip.departure_location}</span>\r\n              </div>\r\n              <div className=\"ml-1 h-4 w-0.5 bg-gray-300\" />\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-2 h-2 rounded-full bg-red-500\" />\r\n                <span>{trip.destination_location}</span>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Driver Information */}\r\n          <Card title=\"Водитель\" className=\"shadow-sm\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <Avatar\r\n                size={64}\r\n                icon={<UserOutlined />}\r\n                src={trip.driver.profile_picture}\r\n              />\r\n              <div>\r\n                <h3 className=\"text-lg font-medium\">\r\n                  {trip.driver.first_name && trip.driver.last_name\r\n                    ? `${trip.driver.first_name} ${trip.driver.last_name}`\r\n                    : trip.driver.username}\r\n                </h3>\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <span className=\"text-yellow-500\">★</span>\r\n                  <span>{trip.driver.driver_rating.toFixed(1)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Card>\r\n\r\n          {/* Trip Details */}\r\n          <Card title=\"Детали поездки\" className=\"shadow-sm\">\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-500\">Дата</span>\r\n                <span>{formattedDate}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-500\">Время</span>\r\n                <span>{trip.time.slice(0, 5)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-500\">Цена</span>\r\n                <span className=\"font-medium\">{trip.price} ₽</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-gray-500\">Свободных мест</span>\r\n                <span>{trip.available_seats}</span>\r\n              </div>\r\n              {trip.route_distance && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-500\">Расстояние</span>\r\n                  <span>{trip.route_distance}</span>\r\n                </div>\r\n              )}\r\n              {trip.route_duration && (\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-500\">Время в пути</span>\r\n                  <span>{trip.route_duration}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </Card>\r\n\r\n          {trip.description && (\r\n            <Card title=\"Описание\" className=\"shadow-sm\">\r\n              <p className=\"text-gray-700\">{trip.description}</p>\r\n            </Card>\r\n          )}\r\n        </div>\r\n\r\n        {/* Map */}\r\n        <div className=\"h-[600px] rounded-lg overflow-hidden shadow-sm\">\r\n          <MapComponent\r\n            departureCoords={departureCoords}\r\n            destinationCoords={destinationCoords}\r\n            onMapClick={() => {}}\r\n            onMarkerDrag={() => {}}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAVA;;;;;;;;;;;AAmCA,2DAA2D;AAC3D,MAAM,eAAe,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;;;;;;IACzB,KAAK;IACL,SAAS,kBAAM,8OAAC;YAAI,WAAU;;;;;;;AAGjB,SAAS,gBAAgB,EAAE,MAAM,EAAuC;IACrF,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,MAAG,AAAD,EAAE;IAC3B,MAAM,UAAU,gHAAA,CAAA,eAAY;IAE5B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,mBAAmB;YACvB,IAAI;gBACF,MAAM,QAAQ,aAAa,OAAO,CAAC;gBACnC,IAAI,CAAC,OAAO;oBACV,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,WAAW,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC,EAAE;oBACzE,SAAS;wBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;oBACpC;gBACF;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,QAAQ;YACV,EAAE,OAAO,KAAK;gBACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC,eAAe,EAAE;QAAE;QAAQ;KAAQ;IAEvC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAgB;;;;;;;;;;;IAGrC;IAEA,IAAI,CAAC,MAAM;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAgB;;;;;;;;;;;IAGrC;IAEA,MAAM,gBAAgB,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,KAAK,KAAK,IAAI,GAAG,eAAe;QAAE,QAAQ,2IAAA,CAAA,KAAE;IAAC;IAC9E,MAAM,cAAc;QAClB,OAAO;QACP,QAAQ;QACR,WAAW;QACX,WAAW;IACb,CAAC,CAAC,KAAK,MAAM,CAAC;IAEd,MAAM,cAAc;QAClB,OAAO;QACP,QAAQ;QACR,WAAW;QACX,WAAW;IACb,CAAC,CAAC,KAAK,MAAM,CAAC;IAEd,MAAM,kBAAkB,KAAK,gBAAgB,EAAE,MAAM,KAAK,IAAI;IAC9D,MAAM,oBAAoB,KAAK,kBAAkB,EAAE,MAAM,KAAK,IAAI;IAElE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC,gLAAA,CAAA,QAAK;wBAAC,QAAQ;wBAAoB,MAAM;;;;;;;;;;;;0BAG3C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC,8KAAA,CAAA,OAAI;gCAAC,OAAM;gCAAU,WAAU;0CAC9B,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;;;;;8DACf,8OAAC;8DAAM,KAAK,kBAAkB;;;;;;;;;;;;sDAEhC,8OAAC;4CAAI,WAAU;;;;;;sDACf,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;;;;;8DACf,8OAAC;8DAAM,KAAK,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;0CAMtC,8OAAC,8KAAA,CAAA,OAAI;gCAAC,OAAM;gCAAW,WAAU;0CAC/B,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,kLAAA,CAAA,SAAM;4CACL,MAAM;4CACN,oBAAM,8OAAC,kNAAA,CAAA,eAAY;;;;;4CACnB,KAAK,KAAK,MAAM,CAAC,eAAe;;;;;;sDAElC,8OAAC;;8DACC,8OAAC;oDAAG,WAAU;8DACX,KAAK,MAAM,CAAC,UAAU,IAAI,KAAK,MAAM,CAAC,SAAS,GAC5C,GAAG,KAAK,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,SAAS,EAAE,GACpD,KAAK,MAAM,CAAC,QAAQ;;;;;;8DAE1B,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAK,WAAU;sEAAkB;;;;;;sEAClC,8OAAC;sEAAM,KAAK,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAOjD,8OAAC,8KAAA,CAAA,OAAI;gCAAC,OAAM;gCAAiB,WAAU;0CACrC,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;8DAAM;;;;;;;;;;;;sDAET,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;8DAAM,KAAK,IAAI,CAAC,KAAK,CAAC,GAAG;;;;;;;;;;;;sDAE5B,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;oDAAK,WAAU;;wDAAe,KAAK,KAAK;wDAAC;;;;;;;;;;;;;sDAE5C,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;8DAAM,KAAK,eAAe;;;;;;;;;;;;wCAE5B,KAAK,cAAc,kBAClB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;8DAAM,KAAK,cAAc;;;;;;;;;;;;wCAG7B,KAAK,cAAc,kBAClB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,8OAAC;8DAAM,KAAK,cAAc;;;;;;;;;;;;;;;;;;;;;;;4BAMjC,KAAK,WAAW,kBACf,8OAAC,8KAAA,CAAA,OAAI;gCAAC,OAAM;gCAAW,WAAU;0CAC/B,cAAA,8OAAC;oCAAE,WAAU;8CAAiB,KAAK,WAAW;;;;;;;;;;;;;;;;;kCAMpD,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,iBAAiB;4BACjB,mBAAmB;4BACnB,YAAY,KAAO;4BACnB,cAAc,KAAO;;;;;;;;;;;;;;;;;;;;;;;AAMjC","debugId":null}}]
}